<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>ArchLinux + GNOME 安装教程 | 二十七画生</title><meta name="keywords" content="Arch,Linux,GNOME"><meta name="author" content="DustWind"><meta name="copyright" content="DustWind"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="ArchLinux + GNOME 安装教程"><meta name="application-name" content="ArchLinux + GNOME 安装教程"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="ArchLinux + GNOME 安装教程"><meta property="og:url" content="http://example.com/2025/04/06/ArchLinux%20+%20GNOME%20%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/index.html"><meta property="og:site_name" content="二十七画生"><meta property="og:description" content="前言本安装教程是根据 ArchWiki—安装指南  、 Archlinux安装与美化全流程  以及笔者多次试验总结而成。如有遗漏或者错误请多指正。 一.准备工作1.1 写入软件当前市面上有许多U盘烧录工具，如Rufus、USBWriter、Ventoy等。笔者在这里强烈建议使用 Ventoy ，它"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E5%A3%81%E7%BA%B8/01.jpg"><meta property="article:author" content="DustWind"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E5%A3%81%E7%BA%B8/01.jpg"><meta name="description" content="前言本安装教程是根据 ArchWiki—安装指南  、 Archlinux安装与美化全流程  以及笔者多次试验总结而成。如有遗漏或者错误请多指正。 一.准备工作1.1 写入软件当前市面上有许多U盘烧录工具，如Rufus、USBWriter、Ventoy等。笔者在这里强烈建议使用 Ventoy ，它"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2025/04/06/ArchLinux%20+%20GNOME%20%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: undefined,
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！~~~","backTitle":"♪(^∇^*)欢迎肥来！~~~"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: DustWind","link":"链接: ","source":"来源: 二十七画生","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '二十七画生',
  title: 'ArchLinux + GNOME 安装教程',
  postAI: '',
  pageFillDescription: '前言, 一.准备工作, 1.1 写入软件, 1.2 镜像文件, 1.3 镜像烧录, 二.安装系统, 2.1 检查 UEFI 启动, 2.2 联网, 2.2.1 启用网卡, 2.2.2 有线网络, 2.2.3 无线网络, 2.2.4 验证网络连通性, 2.3 时间同步, 2.4 更换镜像源, 2.5 硬盘分区, 2.5.1 格式化分区, 2.5.2 挂载分区, 2.6 安装基础系统, 2.7 安装系统常用软件, 2.8 生成文件系统表, 三.配置系统, 3.1 开机自启服务, 3.2 设置时区, 3.3 本地化, 3.4 配置 hostname 和 hosts 文件, 3.5 新建用户, 3.6 安装引导, 3.6.1 平台驱动安装, 3.6.2 Grub 配置, 3.7 重启系统, 四.GNOME 桌面环境安装, 4.1 Xorg 服务安装, 4.2 gnome 包安装前言本安装教程是根据安装指南安装与美化全流程以及笔者多次试验总结而成如有遗漏或者错误请多指正一准备工作写入软件当前市面上有许多盘烧录工具如等笔者在这里强烈建议使用它是由国人制作的一款完全免费的开源工具可以非常简单地部署启动镜像在此贴上链接官网镜像文件当今网络非常发达想要获取资源也有多个途径简单给出镜像获取的两种途径官方网站下载文件国内镜像仓库下载系统文件清华源阿里云源注由于系统采用的是滚动更新模式因此在安装系统时更推荐选取最新的系统镜像镜像烧录笔者使用软件进行烧录具体步骤如下在系统环境下打开软件将分区类型选择为格式将软件安装到盘中根据下图可以看到安装到盘中后界面显示设备内部软件版本安装了以后想部署任何系统可直接将对应的镜像拷贝到盘中即可然后开机选择对应镜像即可进入二安装系统将写入系统镜像的盘插到待安装系统的电脑上开机选择盘启动项即可开始安装注不少主板有类似于的安全选项如果开启可能导致已经安装为第一系统的情况下安装系统失败因此这一项应当掉检查启动首先应当明确一点就是此主板是支持启动还是启动因此可以通过如下命令查看详情如果此命令显示一大堆文件夹那么此主板的引导方式就是否则便是联网由于的安装是在线安装模式网络状况将直接决定安装是否顺利因此在正式安装前应当配置好网络启用网卡如果不确定网卡是否启用可以通过命令查看网卡状态获取网卡列表及各网卡的状态启用所有网卡有线网络针对有线网络可以直接使用命令获取路由器分配的上网无线网络无线网络的配置稍显麻烦一点可通过命令配置进入配置界面获取网络设备列表扫描网络设备如获取局域网列表将对应网络设备连接到指定验证网络连通性如果收到网络回包则网络配置正确时间同步在正式安装之前也应当配置时间同步否则可能由于时间验证失败而导致下载安装包失败查看时间日期状态启用网络时间同步更换镜像源由于国内访问国外网站可能会很慢或者失败的情况因此更换国内镜像源显得尤为重要可通过更改配置文件换源打开配置文件打开镜像配置文件找到第一个关键字并在前方添加需要的镜像站链接添加开源镜像站链接中国科学技术大学重庆邮电大学重庆大学南方科技大学华中科技大学北京外国语大学华为开源镜像站阿里云镜像站执行如下命令更新同步数据库硬盘分区对硬盘进行分区是安装系统最重要的一步如有不注意可能导致该盘数据丢失因此这一步需要格外小心谨慎地操作可通过系统上的软件划出一块空闲的硬盘空间然后进入的之后使用命令分区完成举例得到如下几个分区表大小分区分区类型挂载点备注引导分区交换分区根分区或主目录注交换分区无需分配挂载点只需分区之后开启或者关闭即可笔者有一个三星硬盘以及一个西数的机械硬盘因此会有两个编号三星硬盘编号西数机械硬盘编号有的系统镜像没有分区类型则可以使用分区类型引导方式无需创建分区引导方式则需要创建分区格式化分区在使用之前应当要格式化分区查看需要分区列表确定需要格式化的分区格式化引导分区格式化交换分区格式化根分区格式化主目录分区挂载分区挂载分区的思路是先创建挂载点然后将指定目录挂载查看需要分区列表确定需要挂载的分区挂载引导分区开启交换分区挂载根分区挂载主目录分区注分区挂载完一定要查看是否挂载成功否则后续装入系统可能会出现各种问题安装基础系统使用命令可以安装的基本系统注包基础包包如使用需要安装此包包内核包尽量安装阶段不动也可替换为内核页面介绍的如的其他内核软件包包内核固件包包内核头文件包为最基础的四个包安装系统常用软件使用命令安装系统的常用软件注包网络管理软件包协议分发客户端包远程终端登陆软件包提供了客户端程序守护程序和监控工具包编辑器包查看系统信息软件包超级用户权限管理软件包提供文件系统的支持生成文件系统表通常情况下引导搭配的是分区格式而早前的引导则是搭配的分区格式因此在生成文件系统表时会根据不同搭配使用不同命令生成文件系统表查看文件系统表是否生成注在生成文件系统分区表后一定要查看是否生成否则万一分区表没有写入文件的话后续配置可能会失败三配置系统第二章节的操作保证了基本系统的安装我们还需要进入新安装的系统内部进行一些更细致的配置通过进入新系统注的意思就是的含义这条指令的意思就是将操作权从的启动系统转交给新安装的系统方便在新系统内部进行更多的配置开机自启服务在第二章第七节安装了许多除系统基础软件包之外的额外软件包而有的软件服务是需要开机自启的下面的命令便是启动开机服务几个参数的含义设置开机自启反之为设置本次启动反之为查看服务状态开启网络服务开启服务开启服务设置时区使用如下指令设置时区地区名城市名举例如下所示然后使用命令生成同步时间配置文件本地化完成本地化需要对两个文件进行处理文件以及文件编辑文件去掉两项内容注释然后使用命令生成编辑文件更改为如下内容字符输入数字时间显示格式比较和排序习惯货币单位信息默认纸张尺寸方式姓名书写方式地址书写方式电话号码书写方式度量衡表达方式对自身包含信息概述注和优先级的关系配置和文件配置文件通过编辑文件配置主机名如果没有该文件则创建该文件然后在该文件中按需写入主机名例如创建名为的主机通过编辑器编辑文件写入主机名配置文件通过编辑文件编辑如果没有该文件则创建该文件然后在该文件中写入如下内容通过编辑器编辑文件写入如下内容新建用户使用系统前端时开机会有一个用户登陆界面默认只有一个用户在使用用户登陆之后可以添加一个新用户注在新建用户并重启系统之前一定要更改用户的密码具体操作命令为使用该命令修改密码然后需要重复输入密码修改成功会有提示添加新用户的具体操作如下添加新用户为新用户修改密码注上述命令中各个参数的含义创建新用户的同时创建其对应的家目录指定附加组附加组可以进行提权操作新建用户名注意区分大小写修改配置文件访问并取消这一行注释注的百分号表示用户组前缀第一个表示任意主机名第二个表示任意用户名第三个表示可执行任意命令安装引导平台驱动安装针对平台和平台的开机引导加载驱动程序会有所不同因此要按需安装对应驱动程序查看本机型号安装安装配置在配置之前还应当安装对应的软件包同样的也是分不同的引导方式安装相关软件注的作用在于能发现系统的引导在最新版本的引导方式中默认被关闭想要启用此功能需要在配置文件中将字段取消注释配置启动引导通常情况下为分区为指定的一个分区生成引导配置文件这一步是通过下面指令实现的这一配置文件的修改都是通过修改并生成到此配置文件的重启系统至此的命令行安装方式到此结束先退出或者都可以然后卸载挂载点卸载引导分区关闭交换分区卸载根分区挂载主目录分区查看需要分区列表确定需要挂载的分区在确认卸载挂载点完毕之后便可重新启动系统注意重启屏幕点亮之前一定要拔掉盘四桌面环境安装服务安装由于桌面环境默认使用了的显示服务器协议采用了子协议以兼容协议由于现阶段的兼容性问题笔者还是采用了更传统的基于协议的服务具体安装也非常简单仅需如下命令安装服务器端程序注程序是对于也叫或协议的实现想要正常使用服务还需要对文件进行一些配置如果是需要在上述文件中添加如下内容如果是需要在上述文件中添加如下内容包安装要想使用桌面环境安装对应的软件包如下注是包含在基础包里面的下面是在包中较常用到的包主题相关配置自带终端系统配置的界面为保证桌面环境正常使用需要开机启动服务开机自启服务本次启动服务查看服务状态注的部分设置界面',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-11-09 21:05:35',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">C++在线帮助文档</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://cppreference.cn/w/" title="中文版"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icon_cpp_reference_CN.png" alt="中文版"/><span class="back-menu-item-text">中文版</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://cplusplus.com/reference/" title="英文版"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icon_cpp_reference_EN.png" alt="英文版"/><span class="back-menu-item-text">英文版</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">主页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/DustWind97" title="GitHub"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icon_GitHub.png" alt="GitHub"/><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/dustwind97" title="Gitee"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icon_Gitee.png" alt="Gitee"/><span class="back-menu-item-text">Gitee</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://space.bilibili.com/11246855?spm_id_from=333.1365.0.0" title="B站"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icon_Bilibili.png" alt="B站"/><span class="back-menu-item-text">B站</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">安知鱼</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://docs.anheyu.com/" title="官方文档"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="官方文档"/><span class="back-menu-item-text">官方文档</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">二十七画生</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 好友链</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=9610463782&amp;server=tencent"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 随心随谈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E6%94%B6%E6%AC%BE%E7%A0%81/%E5%BE%AE%E4%BF%A1%E6%94%B6%E6%AC%BE%E7%A0%81.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E6%94%B6%E6%AC%BE%E7%A0%81/%E5%BE%AE%E4%BF%A1%E6%94%B6%E6%AC%BE%E7%A0%81.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E6%94%B6%E6%AC%BE%E7%A0%81/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%B6%E6%AC%BE%E7%A0%81.jpg" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E6%94%B6%E6%AC%BE%E7%A0%81/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%B6%E6%AC%BE%E7%A0%81.jpg"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Arch/" style="font-size: 1.05rem;">Arch<sup>1</sup></a><a href="/tags/C-CPP/" style="font-size: 1.05rem;">C/CPP<sup>1</sup></a><a href="/tags/CMake/" style="font-size: 1.05rem;">CMake<sup>1</sup></a><a href="/tags/CPP/" style="font-size: 1.05rem;">CPP<sup>2</sup></a><a href="/tags/Desktop-Entry/" style="font-size: 1.05rem;">Desktop Entry<sup>1</sup></a><a href="/tags/Docker/" style="font-size: 1.05rem;">Docker<sup>2</sup></a><a href="/tags/GNOME/" style="font-size: 1.05rem;">GNOME<sup>1</sup></a><a href="/tags/Git/" style="font-size: 1.05rem;">Git<sup>1</sup></a><a href="/tags/Hello-World/" style="font-size: 1.05rem;">Hello World<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 1.05rem;">Hexo<sup>1</sup></a><a href="/tags/JDK/" style="font-size: 1.05rem;">JDK<sup>1</sup></a><a href="/tags/Java/" style="font-size: 1.05rem;">Java<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>8</sup></a><a href="/tags/Manjaro/" style="font-size: 1.05rem;">Manjaro<sup>4</sup></a><a href="/tags/Markdown/" style="font-size: 1.05rem;">Markdown<sup>1</sup></a><a href="/tags/MySQL/" style="font-size: 1.05rem;">MySQL<sup>4</sup></a><a href="/tags/Obsidian/" style="font-size: 1.05rem;">Obsidian<sup>2</sup></a><a href="/tags/ProtoBuf/" style="font-size: 1.05rem;">ProtoBuf<sup>1</sup></a><a href="/tags/Qt/" style="font-size: 1.05rem;">Qt<sup>3</sup></a><a href="/tags/Redis/" style="font-size: 1.05rem;">Redis<sup>3</sup></a><a href="/tags/SSH/" style="font-size: 1.05rem;">SSH<sup>1</sup></a><a href="/tags/STL/" style="font-size: 1.05rem;">STL<sup>1</sup></a><a href="/tags/UML/" style="font-size: 1.05rem;">UML<sup>1</sup></a><a href="/tags/VS/" style="font-size: 1.05rem;">VS<sup>1</sup></a><a href="/tags/WSL/" style="font-size: 1.05rem;">WSL<sup>1</sup></a><a href="/tags/Windows/" style="font-size: 1.05rem;">Windows<sup>1</sup></a><a href="/tags/classDiagram/" style="font-size: 1.05rem;">classDiagram<sup>1</sup></a><a href="/tags/gRPC/" style="font-size: 1.05rem;">gRPC<sup>1</sup></a><a href="/tags/%E7%BC%96%E8%AF%91/" style="font-size: 1.05rem;">编译<sup>1</sup></a><a href="/tags/%E8%AF%97%E8%AF%8D/" style="font-size: 1.05rem;">诗词<sup>3</sup></a><a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 1.05rem;">项目<sup>2</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/11/"><span class="card-archive-list-date">十一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/10/"><span class="card-archive-list-date">十月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">八月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">四月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/01/"><span class="card-archive-list-date">一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">三月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/" itemprop="url">Linux</a><i class="anzhiyufont anzhiyu-icon-angle-right post-meta-separator"></i><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/%E6%95%99%E7%A8%8B/" itemprop="url">教程</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Arch/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Arch</span></a><a class="article-meta__tags" href="/tags/Linux/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Linux</span></a><a class="article-meta__tags" href="/tags/GNOME/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>GNOME</span></a></span></div></div><h1 class="post-title" itemprop="name headline">ArchLinux + GNOME 安装教程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-04-06T15:00:19.000Z" title="发表于 2025-04-06 23:00:19">2025-04-06</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-11-09T13:05:35.175Z" title="更新于 2025-11-09 21:05:35">2025-11-09</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">3.9k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>14分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="ArchLinux + GNOME 安装教程"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为重庆市"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>重庆市</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2025/04/06/ArchLinux%20+%20GNOME%20%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E5%A3%81%E7%BA%B8/01.jpg"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2025/04/06/ArchLinux%20+%20GNOME%20%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"><header><a class="post-meta-categories" href="/categories/Linux/" itemprop="url">Linux</a><a class="post-meta-categories" href="/categories/Linux/%E6%95%99%E7%A8%8B/" itemprop="url">教程</a><a href="/tags/Arch/" tabindex="-1" itemprop="url">Arch</a><a href="/tags/Linux/" tabindex="-1" itemprop="url">Linux</a><a href="/tags/GNOME/" tabindex="-1" itemprop="url">GNOME</a><h1 id="CrawlerTitle" itemprop="name headline">ArchLinux + GNOME 安装教程</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">DustWind</span><time itemprop="dateCreated datePublished" datetime="2025-04-06T15:00:19.000Z" title="发表于 2025-04-06 23:00:19">2025-04-06</time><time itemprop="dateCreated datePublished" datetime="2025-11-09T13:05:35.175Z" title="更新于 2025-11-09 21:05:35">2025-11-09</time></header><hr>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本安装教程是根据 <a target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/wiki/%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97">ArchWiki—安装指南 </a> 、 <a target="_blank" rel="noopener" href="https://www.cnblogs.com/vconlln/articles/17065410.html">Archlinux安装与美化全流程</a>  以及笔者多次试验总结而成。如有遗漏或者错误请多指正。</p>
<h1 id="一-准备工作"><a href="#一-准备工作" class="headerlink" title="一.准备工作"></a>一.准备工作</h1><h2 id="1-1-写入软件"><a href="#1-1-写入软件" class="headerlink" title="1.1 写入软件"></a>1.1 写入软件</h2><p>当前市面上有许多U盘烧录工具，如Rufus、USBWriter、Ventoy等。笔者在这里强烈建议使用 Ventoy ，它是由国人制作的一款完全免费的开源工具，可以非常简单地部署启动镜像。在此贴上链接：<a target="_blank" rel="noopener" href="https://www.ventoy.net/cn/">Ventoy官网</a> 。   </p>
<h2 id="1-2-镜像文件"><a href="#1-2-镜像文件" class="headerlink" title="1.2 镜像文件"></a>1.2 镜像文件</h2><p>当今网络非常发达，想要获取资源也有多个途径。简单给出镜像获取的两种途径：</p>
<ol>
<li><p>Arch Linux 官方网站下载 ISO 文件：<a target="_blank" rel="noopener" href="https://archlinux.org/download/">Arch Linux Downloads</a></p>
</li>
<li><p>国内镜像仓库下载系统 ISO 文件：<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/archlinux/iso/">清华源</a>、<a target="_blank" rel="noopener" href="https://mirrors.aliyun.com/archlinux/iso/?spm=a2c6h.25603864.0.0.281a7b8755JtRB">阿里云源</a></p>
</li>
</ol>
<blockquote>
<p><strong>注</strong>：</p>
<p>由于 Arch Linux 系统采用的是滚动更新模式，因此在安装系统时更推荐选取最新的系统镜像。</p>
</blockquote>
<h2 id="1-3-镜像烧录"><a href="#1-3-镜像烧录" class="headerlink" title="1.3 镜像烧录"></a>1.3 镜像烧录</h2><p>笔者使用 Ventoy 软件进行烧录。具体步骤如下：</p>
<ol>
<li>在 Windows 系统环境下打开 Ventoy 软件，将分区类型选择为 GPT 格式</li>
</ol>
<div style="text-align: center;">
    <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/img/Arch%20Linux%20Install/%E9%95%9C%E5%83%8F%E5%86%99%E5%85%A5%E8%BD%AF%E4%BB%B6Ventoy/1.%E5%90%AF%E5%8A%A8%E7%9B%98%E5%88%86%E5%8C%BA%E9%80%89%E6%8B%A9.png" alt="选择GPT分区格式"  />
</div>



<ol start="2">
<li>将 Ventoy 软件安装到 U 盘中</li>
</ol>
<div style="text-align: center;">
    <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/img/Arch%20Linux%20Install/%E9%95%9C%E5%83%8F%E5%86%99%E5%85%A5%E8%BD%AF%E4%BB%B6Ventoy/2.%E5%B0%86Ventoy%E5%AE%89%E8%A3%85%E5%88%B0U%E7%9B%98%E9%87%8C.png" alt="安装Ventoy驱动到U盘"  />
</div>



<ol start="3">
<li>根据下图可以看到安装 Ventoy 到 U 盘中后界面显示设备内部 Ventoy 软件版本</li>
</ol>
<div style="text-align: center;">
    <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/img/Arch%20Linux%20Install/%E9%95%9C%E5%83%8F%E5%86%99%E5%85%A5%E8%BD%AF%E4%BB%B6Ventoy/3.%E6%88%90%E5%8A%9F%E5%B0%86Ventoy%E5%AE%89%E8%A3%85%E5%88%B0U%E7%9B%98%E4%B8%AD.png" alt="Ventoy安装后"  />
</div>



<ol start="4">
<li>安装了 Ventoy ，以后想部署任何系统可直接将对应的 ISO 镜像拷贝到 U 盘中即可，然后开机选择对应镜像即可进入。</li>
</ol>
<h1 id="二-安装系统"><a href="#二-安装系统" class="headerlink" title="二.安装系统"></a>二.安装系统</h1><p>将写入系统镜像的U盘插到待安装系统的电脑上，开机选择U盘启动项即可开始安装。</p>
<blockquote>
<p><strong>注</strong>：</p>
<p>不少主板有类似于 Secure Boot 的安全选项，如果开启可能导致已经安装 Windows 为第一系统的情况下安装 Linux系统失败，因此这一项应当 Disable 掉。</p>
</blockquote>
<h2 id="2-1-检查-UEFI-启动"><a href="#2-1-检查-UEFI-启动" class="headerlink" title="2.1 检查 UEFI 启动"></a>2.1 检查 UEFI 启动</h2><p>首先应当明确一点就是，此主板是支持 BIOS 启动还是 UEFI 启动。因此可以通过如下命令查看详情：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls /sys/firmware/efi/efivars</span><br></pre></td></tr></table></figure>

<p>如果此命令显示一大堆文件夹，那么此主板的引导方式就是 UEFI ，否则便是 BIOS 。</p>
<h2 id="2-2-联网"><a href="#2-2-联网" class="headerlink" title="2.2 联网"></a>2.2 联网</h2><p>由于 Arch Linux 的安装是在线安装模式，网络状况将直接决定安装是否顺利。因此在正式安装前应当配置好网络。</p>
<h3 id="2-2-1-启用网卡"><a href="#2-2-1-启用网卡" class="headerlink" title="2.2.1 启用网卡"></a>2.2.1 启用网卡</h3><p>如果不确定网卡是否启用，可以通过 <code>rfkill</code> 命令查看网卡状态</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">获取网卡列表及各网卡的状态</span></span><br><span class="line">rfkill list</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启用所有网卡</span></span><br><span class="line">rfkill unblock all</span><br></pre></td></tr></table></figure>

<h3 id="2-2-2-有线网络"><a href="#2-2-2-有线网络" class="headerlink" title="2.2.2 有线网络"></a>2.2.2 有线网络</h3><p>针对有线网络。可以直接使用 <code>dhcpcd</code> 命令获取路由器分配的 IP 上网。</p>
<h3 id="2-2-3-无线网络"><a href="#2-2-3-无线网络" class="headerlink" title="2.2.3 无线网络"></a>2.2.3 无线网络</h3><p>无线网络的配置稍显麻烦一点，可通过 <code>iwctl</code> 命令配置</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入配置界面</span></span><br><span class="line">iwctl</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">获取网络设备列表</span></span><br><span class="line">device list</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">扫描网络设备</span></span><br><span class="line">station &lt;device_name&gt; scan  # 如 wlan0</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">获取局域网 WiFi 列表</span></span><br><span class="line">station &lt;device_name&gt; get-networks</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将对应网络设备连接到指定 WiFi</span></span><br><span class="line">station &lt;device_name&gt; connect &lt;WiFi Name&gt; </span><br></pre></td></tr></table></figure>

<h3 id="2-2-4-验证网络连通性"><a href="#2-2-4-验证网络连通性" class="headerlink" title="2.2.4 验证网络连通性"></a>2.2.4 验证网络连通性</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping baidu.com</span><br></pre></td></tr></table></figure>

<p>如果收到网络 icmp 回包则网络配置正确。</p>
<h2 id="2-3-时间同步"><a href="#2-3-时间同步" class="headerlink" title="2.3 时间同步"></a>2.3 时间同步</h2><p>在正式安装之前也应当配置时间同步，否则可能由于时间验证失败而导致下载安装包失败。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看时间日期状态</span></span><br><span class="line">timedatectl status</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启用网络时间同步（NTP ）</span></span><br><span class="line">timedatectl set-ntp true</span><br></pre></td></tr></table></figure>

<h2 id="2-4-更换镜像源"><a href="#2-4-更换镜像源" class="headerlink" title="2.4 更换镜像源"></a>2.4 更换镜像源</h2><p>由于国内访问国外网站可能会很慢或者失败的情况，因此更换国内镜像源显得尤为重要。可通过更改 <code>/etc/pacman.d/mirrorlist</code> 配置文件换源。</p>
<ol>
<li>打开配置文件</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打开镜像配置文件</span></span><br><span class="line">nano /etc/pacman.d/mirrorlist</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>找到第一个 Server 关键字，并在前方添加需要的镜像站链接</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加开源镜像站链接</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">中国科学技术大学</span></span><br><span class="line">Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重庆邮电大学</span></span><br><span class="line">Server = https://mirrors.cqupt.edu.cn/archlinux/$repo/os/$arch</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重庆大学</span></span><br><span class="line">Server = https://mirrors.cqu.edu.cn/archlinux/$repo/os/$arch</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">南方科技大学</span></span><br><span class="line">Server = https://mirrors.sustech.edu.cn/archlinux/$repo/os/$arch</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">华中科技大学</span></span><br><span class="line">Server = https://mirrors.hust.edu.cn/archlinux/$repo/os/$arch</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">北京外国语大学</span></span><br><span class="line">Server = https://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">华为开源镜像站</span></span><br><span class="line">Server = https://mirrors.huaweicloud.com/archlinux/$repo/os/$arch</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Server = https://repo.huaweicloud.com/archlinux/<span class="variable">$repo</span>/os/<span class="variable">$arch</span></span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">阿里云镜像站</span></span><br><span class="line">Server = http://mirrors.aliyun.com/archlinux/$repo/os/$arch</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>执行如下命令更新同步数据库</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -Sy</span><br></pre></td></tr></table></figure>



<h2 id="2-5-硬盘分区"><a href="#2-5-硬盘分区" class="headerlink" title="2.5 硬盘分区"></a>2.5 硬盘分区</h2><p>对硬盘进行分区是安装 Linux 系统最重要的一步，如有不注意可能导致该盘数据丢失，因此这一步需要格外小心谨慎地操作。可通过 Windows 系统上的 DiskGenius 软件划出一块空闲的硬盘空间，然后进入 Arch Linux 的 LiveCD 之后使用 <code>cfdisk</code> 命令分区完成，举例得到如下几个分区表：</p>
<table>
<thead>
<tr>
<th align="center">大小</th>
<th align="center">分区</th>
<th align="center">分区类型</th>
<th align="center">挂载点</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center">512M</td>
<td align="center">&#x2F;dev&#x2F;sdb1</td>
<td align="center">EFI System</td>
<td align="center">&#x2F;mnt&#x2F;boot</td>
<td align="center">引导分区</td>
</tr>
<tr>
<td align="center">8G</td>
<td align="center">&#x2F;dev&#x2F;sdb4</td>
<td align="center">Linux swap</td>
<td align="center">—</td>
<td align="center">交换分区</td>
</tr>
<tr>
<td align="center">100G</td>
<td align="center">&#x2F;dev&#x2F;sdb5</td>
<td align="center">Linux root (x86-64)</td>
<td align="center">&#x2F;mnt</td>
<td align="center">根分区</td>
</tr>
<tr>
<td align="center">100G</td>
<td align="center">&#x2F;dev&#x2F;sdb6</td>
<td align="center">Linux filesystem 或 Linux home</td>
<td align="center">&#x2F;mnt&#x2F;home</td>
<td align="center">主目录</td>
</tr>
</tbody></table>
<blockquote>
<p>注：</p>
<ol>
<li><p>交换分区无需分配挂载点，只需分区之后开启或者关闭即可</p>
</li>
<li><p>笔者有一个三星 SSD 硬盘以及一个西数的机械硬盘，因此会有两个编号：</p>
<ol>
<li>三星 SSD 硬盘编号：<code>/sda</code></li>
<li>西数 机械 硬盘编号：<code>/sdb</code></li>
</ol>
</li>
<li><p>有的 LiveCD 系统镜像没有 <code>Linux home</code>分区类型，则可以使用 <code>Linux filesystem</code>分区类型</p>
</li>
<li><p><code>Legacy</code> 引导方式无需创建 boot 分区，<code>UEFI</code> 引导方式则需要创建 boot 分区。</p>
</li>
</ol>
</blockquote>
<h3 id="2-5-1-格式化分区"><a href="#2-5-1-格式化分区" class="headerlink" title="2.5.1 格式化分区"></a>2.5.1 格式化分区</h3><p>在使用之前应当要格式化分区</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看需要分区列表确定需要格式化的分区</span></span><br><span class="line">lsblk -T</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">格式化引导分区</span></span><br><span class="line">mkfs.fat -F 32 /dev/sdb1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">格式化交换分区</span></span><br><span class="line">mkswap /dev/sdb4</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">格式化根分区</span></span><br><span class="line">mkfs.ext4 /dev/sdb5</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">格式化主目录分区</span></span><br><span class="line">mkfs.ext4 /dev/sdb6</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br></pre></td></tr></table></figure>



<h3 id="2-5-2-挂载分区"><a href="#2-5-2-挂载分区" class="headerlink" title="2.5.2 挂载分区"></a>2.5.2 挂载分区</h3><p>挂载分区的思路是先创建挂载点，然后将指定目录挂载</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看需要分区列表确定需要挂载的分区</span></span><br><span class="line">lsblk -T</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">挂载引导分区</span></span><br><span class="line">mount --mkdir /dev/sdb1 /mnt/boot</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开启交换分区</span></span><br><span class="line">swapon /dev/sdb4</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">挂载根分区</span></span><br><span class="line">mount /dev/sdb5 /mnt</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">挂载主目录分区</span></span><br><span class="line">mount --mkdir /dev/sdb6 /mnt/home</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br></pre></td></tr></table></figure>



<blockquote>
<p><strong>注</strong>：</p>
<p>分区挂载完一定要查看是否挂载成功，否则后续装入系统可能会出现各种问题</p>
</blockquote>
<h2 id="2-6-安装基础系统"><a href="#2-6-安装基础系统" class="headerlink" title="2.6 安装基础系统"></a>2.6 安装基础系统</h2><p>使用 <code>pacstrap</code>命令可以安装 Arch Linux 的基本系统</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacstrap -K /mnt base base-devel linux linux-firmware linux-headers</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注</strong>：</p>
<ul>
<li><p>base 包：基础包</p>
</li>
<li><p>base-devel 包：如使用 yay 需要安装此包</p>
</li>
<li><p>linux 包：linux 内核包，尽量安装阶段不动，也可替换为 <a target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/wiki/%E5%86%85%E6%A0%B8">Wiki内核页面</a>介绍的如 linux-lts 的其他内核软件包</p>
</li>
<li><p>linux-firmware 包：linux 内核固件包</p>
</li>
<li><p>linux-headers 包：linux 内核头文件包</p>
</li>
</ul>
<p>PS: base base-devel linux linux-firmware 为最基础的四个包</p>
</blockquote>
<h2 id="2-7-安装系统常用软件"><a href="#2-7-安装系统常用软件" class="headerlink" title="2.7 安装系统常用软件"></a>2.7 安装系统常用软件</h2><p>使用 <code>pacstrap</code>命令安装 Arch Linux 系统的常用软件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacstrap -K /mnt networkmanager dhcpcd openssh iwd  vim nano neofetch sudo ntfs-3g</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注</strong>：</p>
<ul>
<li><p>networkmanager 包：网络管理软件</p>
</li>
<li><p>dhcpcd 包：DHCP 协议 IP 分发客户端</p>
</li>
<li><p>openssh 包：远程终端登陆软件</p>
</li>
<li><p>iwd 包：提供了客户端程序 <code>iwctl</code>、守护程序 <code>iwd</code> 和 WiFi 监控工具 <code>iwmon</code></p>
</li>
<li><p>vim、nano 包：编辑器</p>
</li>
<li><p>neofetch 包：查看系统信息软件</p>
</li>
<li><p>sudo 包：超级用户权限管理软件</p>
</li>
<li><p>ntfs-3g 包：提供 ntfs 文件系统的支持</p>
</li>
</ul>
</blockquote>
<h2 id="2-8-生成文件系统表"><a href="#2-8-生成文件系统表" class="headerlink" title="2.8 生成文件系统表"></a>2.8 生成文件系统表</h2><p>通常情况下，UEFI 引导搭配的是 GPT 分区格式，而早前的 BIOS 引导则是搭配的 MBR 分区格式。因此，在生成文件系统表时会根据不同搭配使用不同命令。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">生成文件系统表</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1. UEFI + GPT</span></span><br><span class="line">genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2. BIOS + MBR</span></span><br><span class="line">genfstab -p /mnt &gt;&gt; /mnt/etc/fstab</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看文件系统表是否生成</span></span><br><span class="line">cat /mnt/etc/fstab</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br></pre></td></tr></table></figure>



<blockquote>
<p><strong>注</strong>：</p>
<p>在生成文件系统分区表后一定要查看是否生成，否则万一 boot 分区表没有写入 fstab 文件的话后续配置 Grub 可能会失败</p>
</blockquote>
<h1 id="三-配置系统"><a href="#三-配置系统" class="headerlink" title="三.配置系统"></a>三.配置系统</h1><p>第二章节的操作保证了 Arch Linux 基本系统的安装，我们还需要进入新安装的系统内部进行一些更细致的配置。通过 <code>arch-chroot</code> 进入新系统：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arch-chroot /mnt</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注</strong>：</p>
<p>chroot 的意思就是 change root 的含义，arch-chroot 这条指令的意思就是将操作权从 LiveCD 的启动系统转交给新安装的系统，方便在新系统内部进行更多的配置。</p>
</blockquote>
<h2 id="3-1-开机自启服务"><a href="#3-1-开机自启服务" class="headerlink" title="3.1 开机自启服务"></a>3.1 开机自启服务</h2><p>在 <code>第二章第七节</code> 安装了许多除系统基础软件包之外的额外软件包，而有的软件服务是需要开机自启的。下面的命令便是启动开机服务：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">systemctl 几个参数的含义</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1. <span class="built_in">enable</span>：设置开机自启，反之为 <span class="built_in">disable</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2. start：设置本次启动，反之为 stop</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3. status：查看服务状态</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开启网络服务</span></span><br><span class="line">systemctl enable NetworkManager.service</span><br><span class="line">systemctl start NetworkManager.service</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开启 dhcpcd 服务</span></span><br><span class="line">systemctl enable dhcpcd.service</span><br><span class="line">systemctl start dhcpcd.service</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line">开启 ssh 服务</span><br><span class="line">systemctl enable sshd.service</span><br><span class="line">systemctl start sshd.service</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br></pre></td></tr></table></figure>



<h2 id="3-2-设置时区"><a href="#3-2-设置时区" class="headerlink" title="3.2 设置时区"></a>3.2 设置时区</h2><p>使用如下指令设置时区</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ln -sf /usr/share/zoneinfo/Region地区名/City城市名 /etc/localtime</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">举例如下所示</span></span><br><span class="line">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br></pre></td></tr></table></figure>

<p>然后使用 <code>hwclock</code> 命令生成 <code>/etc/adjtime</code> 同步时间配置文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hwclock --systohc</span><br></pre></td></tr></table></figure>



<h2 id="3-3-本地化"><a href="#3-3-本地化" class="headerlink" title="3.3 本地化"></a>3.3 本地化</h2><p>完成本地化需要对两个文件进行处理： <code>locale.gen</code> 文件以及 <code>locale.conf</code> 文件</p>
<ol>
<li>编辑 <code>/etc/locale.gen</code> 文件去掉两项内容注释：</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">en_US.UTF-8 UTF-8</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">zh_CN.UTF-8 UTF-8</span></span><br></pre></td></tr></table></figure>

<p>然后使用 <code>locale-gen</code> 命令生成 Locale。</p>
<ol start="2">
<li>编辑 <code>/etc/locale.conf</code> 文件，更改为如下内容</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">LANG=en_US.UTF-8</span></span><br><span class="line">LANG=zh_CN.UTF-8</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line">LC_CTYPE=zh_CN.UTF-8            # 字符输入</span><br><span class="line">LC_NUMERIC=zh_CN.UTF-8          # 数字</span><br><span class="line">LC_TIME=zh_CN.UTF-8				# 时间显示格式</span><br><span class="line">LC_COLLATE=zh_CN.UTF-8          # 比较和排序习惯</span><br><span class="line">LC_MONETARY=zh_CN.UTF-8         # 货币单位</span><br><span class="line">LC_MESSAGES=zh_CN.UTF-8         # 信息</span><br><span class="line">LC_PAPER=zh_CN.UTF-8	        # 默认纸张尺寸方式</span><br><span class="line">LC_NAME=zh_CN.UTF-8		        # 姓名书写方式</span><br><span class="line">LC_ADDRESS=zh_CN.UTF-8          # 地址书写方式</span><br><span class="line">LC_TELEPHONE=zh_CN.UTF-8        # 电话号码书写方式</span><br><span class="line">LC_MEASUREMENT=zh_CN.UTF-8      # 度量衡表达方式</span><br><span class="line">LC_IDENTIFICATION=zh_CN.UTF-8   # 对 locale 自身包含信息概述</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">LC_ALL=zh_CN.UTF-8</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br></pre></td></tr></table></figure>



<blockquote>
<p><strong>注</strong>：</p>
<p>LC_ALL、LC_* 和 LANG 优先级的关系：LC_ALL &gt; LC_* &gt; LANG</p>
</blockquote>
<h2 id="3-4-配置-hostname-和-hosts-文件"><a href="#3-4-配置-hostname-和-hosts-文件" class="headerlink" title="3.4 配置 hostname 和 hosts 文件"></a>3.4 配置 hostname 和 hosts 文件</h2><ol>
<li>配置 hostname 文件</li>
</ol>
<p>通过编辑 <code>/etc/hostname</code> 文件配置主机名，如果没有该文件则创建该文件。然后在该文件中按需写入主机名。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如创建名为 ArchLinux 的主机</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">通过 vim 编辑器编辑 hostname 文件</span></span><br><span class="line">vim /etc/hostname</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">写入主机名</span></span><br><span class="line">ArchLinux</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br></pre></td></tr></table></figure>



<ol start="2">
<li>配置 hosts 文件</li>
</ol>
<p>通过编辑 <code>/etc/hosts</code> 文件编辑 hosts，如果没有该文件则创建该文件。然后在该文件中写入如下内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span>  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">通过 vim 编辑器编辑 hosts 文件</span></span><br><span class="line">vim /etc/hosts</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">写入如下内容</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Standard host addresses</span></span><br><span class="line">127.0.0.1		localhost</span><br><span class="line">::1			      localhost</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">This host address</span></span><br><span class="line">127.0.1.1            ArchLinux.localdomain		ArchLinux</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br></pre></td></tr></table></figure>



<h2 id="3-5-新建用户"><a href="#3-5-新建用户" class="headerlink" title="3.5 新建用户"></a>3.5 新建用户</h2><p>使用系统前端时，开机会有一个用户登陆界面，默认只有一个 root 用户，在使用 root 用户登陆之后可以添加一个新用户。</p>
<blockquote>
<p><strong>注</strong>：</p>
<p>在新建用户并重启系统之前一定要更改 root 用户的密码，具体操作命令为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash"><span class="comment"># 使用该命令修改密码</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">passwd root</span></span><br></pre></td></tr></table></figure>

<p>然后需要重复输入密码，修改成功会有提示。</p>
</blockquote>
<ol>
<li>添加新用户的具体操作如下：</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加新用户</span></span><br><span class="line">useradd -m -G wheel &lt;username&gt;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">为新用户修改密码</span></span><br><span class="line">passwd &lt;username&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注</strong>：</p>
<p>上述命令中各个参数的含义：</p>
<ol>
<li><code>-m</code> ：创建新用户的同时创建其对应的家目录</li>
<li><code>-G</code> ：指定附加组（wheel 附加组可以进行 sudo 提权操作）</li>
<li><code>&lt;username&gt;</code> ：新建用户名，注意区分大小写</li>
</ol>
</blockquote>
<ol start="2">
<li>修改 <code>/etc/sudoer</code> 配置文件</li>
</ol>
<p>访问 <code>/etc/sudoer</code> 并取消 <code># %wheel ALL=(ALL) ALL</code> 这一行注释。</p>
<blockquote>
<p><strong>注</strong>：</p>
<p><code>%wheel</code> 的百分号表示用户组前缀；第一个 <code>ALL</code> 表示任意主机名；第二个 <code>ALL</code> 表示任意用户名；第三个 <code>ALL</code> 表示可执行任意命令。</p>
</blockquote>
<h2 id="3-6-安装引导"><a href="#3-6-安装引导" class="headerlink" title="3.6 安装引导"></a>3.6 安装引导</h2><h3 id="3-6-1-平台驱动安装"><a href="#3-6-1-平台驱动安装" class="headerlink" title="3.6.1 平台驱动安装"></a>3.6.1 平台驱动安装</h3><p>针对 Intel 平台和 AMD 平台的 CPU 开机引导加载驱动程序会有所不同，因此要按需安装对应驱动程序：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看本机 CPU 型号</span></span><br><span class="line">cat /proc/cpuinfo</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1. Intel CPU 安装</span></span><br><span class="line">pacman -S intel-ucode</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2. AMD CPU 安装</span></span><br><span class="line">pacman -S amd-ucode</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br></pre></td></tr></table></figure>



<h3 id="3-6-2-Grub-配置"><a href="#3-6-2-Grub-配置" class="headerlink" title="3.6.2 Grub 配置"></a>3.6.2 Grub 配置</h3><p>在配置 Grub 之前还应当安装对应的软件包，同样的 Grub 也是分不同的引导方式。</p>
<ol>
<li>安装 Grub 相关软件</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1. UEFI + GPT</span></span><br><span class="line">pacman -S grub efibootmgr efivar os-prober</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2. BIOS + MBR</span></span><br><span class="line">pacman -S grub efivar os-prober</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br></pre></td></tr></table></figure>



<blockquote>
<p><strong>注</strong>：</p>
<ol>
<li><code>os-prober</code> 的作用在于能发现 Windows 系统的引导</li>
<li>在最新版本的 Grub2 引导方式中，<code>os-prober</code> 默认被关闭，想要启用此功能需要在 <code>/etc/default/grub</code> 配置文件中将 <code># GRUB_DISABLE_OS_PROBER=false</code> 字段取消注释。</li>
</ol>
</blockquote>
<ol start="2">
<li>配置 Grub 启动引导</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1. UEFI + GPT</span></span><br><span class="line">grub-install --target=x86_64-efi --efi-directory=&lt;EFI Dir&gt; --bootloader-id=Arch --removable</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;EFI Dir&gt; 通常情况下为 /boot 分区</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2. BIOS + MBR</span></span><br><span class="line">grub-install --target=i386-pc &lt;Dir&gt; --removable --force</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;Dir&gt; 为指定的一个分区</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br></pre></td></tr></table></figure>



<ol start="3">
<li>生成 Grub 引导配置文件</li>
</ol>
<p>这一步是通过下面指令实现的，这一配置文件的修改都是通过 <code>/etc/default/grub</code> 修改并 <code>grub-mkconfig</code> 生成到此配置文件的。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>



<h2 id="3-7-重启系统"><a href="#3-7-重启系统" class="headerlink" title="3.7 重启系统"></a>3.7 重启系统</h2><p>至此 ArchLinux 的命令行安装方式到此结束。先退出 <code>arch-chroot</code> （exit 或者 quit 都可以），然后卸载挂载点。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">卸载引导分区</span></span><br><span class="line">umount /dev/sdb1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">关闭交换分区</span></span><br><span class="line">swapoff /dev/sdb4</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">卸载根分区</span></span><br><span class="line">umount /dev/sdb5</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">挂载主目录分区</span></span><br><span class="line">umount /dev/sdb6</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看需要分区列表确定需要挂载的分区</span></span><br><span class="line">lsblk -T</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">------------------------------------------------------------------------------ <span class="comment">#</span></span></span><br></pre></td></tr></table></figure>

<p>在确认卸载挂载点完毕之后便可重新启动系统，注意重启屏幕点亮之前一定要拔掉 U 盘。</p>
<h1 id="四-GNOME-桌面环境安装"><a href="#四-GNOME-桌面环境安装" class="headerlink" title="四.GNOME 桌面环境安装"></a>四.GNOME 桌面环境安装</h1><h2 id="4-1-Xorg-服务安装"><a href="#4-1-Xorg-服务安装" class="headerlink" title="4.1 Xorg 服务安装"></a>4.1 Xorg 服务安装</h2><p>由于 GNOME 桌面环境默认使用了 Wayland 的显示服务器协议。Wayland 采用了 Xwayland 子协议以兼容 X 协议。由于 Wayland 现阶段的兼容性问题，笔者还是采用了更传统的基于 X 协议的 Xorg 服务。具体安装也非常简单，仅需如下命令安装 Xorg 服务器端程序：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S xorg-server</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注</strong>：</p>
<p>Xorg 程序是对于 X11（也叫X Window 或 X）协议的实现</p>
</blockquote>
<p>想要正常使用 Xorg 服务，还需要对 <code>~/.xinitrc</code> 文件进行一些配置：</p>
<ol>
<li>如果是 GNOME on Xorg ，需要在上述文件中添加如下内容：</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export XDG_SESSION_TYPE=x11</span><br><span class="line">export GDK_BACKEND=x11</span><br><span class="line">exec gnome-session</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>如果是 GNOME Classic ，需要在上述文件中添加如下内容：</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export XDG_CURRENT_DESKTOP=GNOME-Classic:GNOME</span><br><span class="line">export GNOME_SHELL_SESSION_MODE=classic</span><br><span class="line">exec gnome-session</span><br></pre></td></tr></table></figure>



<h2 id="4-2-gnome-包安装"><a href="#4-2-gnome-包安装" class="headerlink" title="4.2 gnome 包安装"></a>4.2 gnome 包安装</h2><p>要想使用 GNOME 桌面环境，安装对应的软件包如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S gnome gnome-tweaks gnome-terminal dconf-editor</span><br></pre></td></tr></table></figure>



<blockquote>
<p><strong>注</strong>：</p>
<ol>
<li><p>GDM 是包含在 gnome 基础包里面的</p>
</li>
<li><p>下面是在 gnome-extra 包中较常用到的包：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://archlinux.org/packages/extra/any/gnome-tweaks/"> gnome-tweaks</a> gnome 主题相关配置</li>
<li><a target="_blank" rel="noopener" href="https://archlinux.org/packages/extra/x86_64/gnome-terminal/"> gnome-terminal</a> gnome 自带终端</li>
<li><a target="_blank" rel="noopener" href="https://archlinux.org/packages/extra/x86_64/dconf-editor/"> dconf-editor</a> dconf 系统配置的 GUI 界面</li>
</ul>
</li>
</ol>
</blockquote>
<p>为保证 GNOME 桌面环境正常使用，需要开机启动 GDM 服务。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开机自启 GDM 服务</span></span><br><span class="line">systemctl enable gdm.service</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">本次启动 GDM 服务</span></span><br><span class="line">systemctl start gdm.service</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看 GDM 服务状态</span></span><br><span class="line">systemctl status gdm.service</span><br></pre></td></tr></table></figure>



<blockquote>
<p><strong>注</strong>：</p>
<p><a target="_blank" rel="noopener" href="https://aur.archlinux.org/pkgbase/gdm-settings">gdm-settings</a> gdm 的部分设置 GUI 界面</p>
</blockquote>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/vaeCarton.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/vaeCarton.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">DustWind</div><div class="post-copyright__author_desc">心中有海，不赶浪潮</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2025/04/06/ArchLinux%20+%20GNOME%20%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2025/04/06/ArchLinux%20+%20GNOME%20%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/')">ArchLinux + GNOME 安装教程</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E6%94%B6%E6%AC%BE%E7%A0%81/%E5%BE%AE%E4%BF%A1%E6%94%B6%E6%AC%BE%E7%A0%81.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E6%94%B6%E6%AC%BE%E7%A0%81/%E5%BE%AE%E4%BF%A1%E6%94%B6%E6%AC%BE%E7%A0%81.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E6%94%B6%E6%AC%BE%E7%A0%81/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%B6%E6%AC%BE%E7%A0%81.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E6%94%B6%E6%AC%BE%E7%A0%81/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%B6%E6%AC%BE%E7%A0%81.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2025/04/06/ArchLinux%20+%20GNOME%20%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=ArchLinux + GNOME 安装教程&amp;url=http://example.com/2025/04/06/ArchLinux%20+%20GNOME%20%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/&amp;pic=https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E5%A3%81%E7%BA%B8/01.jpg" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">二十七画生</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Arch/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Arch<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/Linux/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Linux<span class="tagsPageCount">8</span></a><a class="post-meta__box__tags" href="/tags/GNOME/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>GNOME<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E5%A3%81%E7%BA%B8/52121.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/01/31/Manjaro%20%E4%BD%BF%E7%94%A8%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E5%A3%81%E7%BA%B8/43793.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Manjaro 使用常见问题汇总</div></div></a></div><div class="next-post pull-right"><a href="/2025/08/06/%E5%B7%A5%E4%BD%9C_%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86-%E5%85%A8%E6%A0%88%E8%81%8A%E5%A4%A9/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E5%A3%81%E7%BA%B8/%E9%AB%98%E6%B8%85%E5%A3%81%E7%BA%B8%20%28741%29.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">全栈聊天</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2022/04/29/Linux%20%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" title="Linux 常用命令"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E5%A3%81%E7%BA%B8/29825.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-04-29</div><div class="title">Linux 常用命令</div></div></a></div><div><a href="/2025/01/31/Manjaro%20%E4%BD%BF%E7%94%A8%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/" title="Manjaro 使用常见问题汇总"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E5%A3%81%E7%BA%B8/43793.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-01-31</div><div class="title">Manjaro 使用常见问题汇总</div></div></a></div><div><a href="/2025/01/29/Manjaro%20%E5%8F%8A%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/" title="Manjaro 及常用软件安装配置"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E5%A3%81%E7%BA%B8/38968.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-01-29</div><div class="title">Manjaro 及常用软件安装配置</div></div></a></div><div><a href="/2025/01/23/Manjaro%20%E6%A1%8C%E9%9D%A2%E5%9B%BE%E6%A0%87%E5%88%9B%E5%BB%BA/" title="Manjaro 桌面图标创建"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E5%A3%81%E7%BA%B8/49745.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-01-23</div><div class="title">Manjaro 桌面图标创建</div></div></a></div><div><a href="/2025/01/31/Manjaro%20%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F/" title="Manjaro 的软件安装方式"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E5%A3%81%E7%BA%B8/36602.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-01-31</div><div class="title">Manjaro 的软件安装方式</div></div></a></div><div><a href="/2021/01/06/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE%20SSH/" title="云服务器配置 SSH"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E5%A3%81%E7%BA%B8/18.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2021-01-06</div><div class="title">云服务器配置 SSH</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)" style="display: none">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/vaeCarton.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这里有关于<b style="color:#fff">C/C++、Linux、Qt、MySQL</b>等编程相关的知识与教程分享，也有本人的<b style="color:#fff">诗歌阅读</b>和<b style="color:#fff">日常分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你能在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/about"><h1 class="author-info__name">DustWind</h1><div class="author-info__desc">心中有海，不赶浪潮</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/DustWind97" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/11246855?spm_id_from=333.1387.0.0" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来看我的博客鸭~~~~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">2.</span> <span class="toc-text">一.准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E5%86%99%E5%85%A5%E8%BD%AF%E4%BB%B6"><span class="toc-number">2.1.</span> <span class="toc-text">1.1 写入软件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6"><span class="toc-number">2.2.</span> <span class="toc-text">1.2 镜像文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E9%95%9C%E5%83%8F%E7%83%A7%E5%BD%95"><span class="toc-number">2.3.</span> <span class="toc-text">1.3 镜像烧录</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C-%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F"><span class="toc-number">3.</span> <span class="toc-text">二.安装系统</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E6%A3%80%E6%9F%A5-UEFI-%E5%90%AF%E5%8A%A8"><span class="toc-number">3.1.</span> <span class="toc-text">2.1 检查 UEFI 启动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E8%81%94%E7%BD%91"><span class="toc-number">3.2.</span> <span class="toc-text">2.2 联网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-%E5%90%AF%E7%94%A8%E7%BD%91%E5%8D%A1"><span class="toc-number">3.2.1.</span> <span class="toc-text">2.2.1 启用网卡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-%E6%9C%89%E7%BA%BF%E7%BD%91%E7%BB%9C"><span class="toc-number">3.2.2.</span> <span class="toc-text">2.2.2 有线网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-%E6%97%A0%E7%BA%BF%E7%BD%91%E7%BB%9C"><span class="toc-number">3.2.3.</span> <span class="toc-text">2.2.3 无线网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-4-%E9%AA%8C%E8%AF%81%E7%BD%91%E7%BB%9C%E8%BF%9E%E9%80%9A%E6%80%A7"><span class="toc-number">3.2.4.</span> <span class="toc-text">2.2.4 验证网络连通性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5"><span class="toc-number">3.3.</span> <span class="toc-text">2.3 时间同步</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E6%9B%B4%E6%8D%A2%E9%95%9C%E5%83%8F%E6%BA%90"><span class="toc-number">3.4.</span> <span class="toc-text">2.4 更换镜像源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA"><span class="toc-number">3.5.</span> <span class="toc-text">2.5 硬盘分区</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-1-%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%88%86%E5%8C%BA"><span class="toc-number">3.5.1.</span> <span class="toc-text">2.5.1 格式化分区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-2-%E6%8C%82%E8%BD%BD%E5%88%86%E5%8C%BA"><span class="toc-number">3.5.2.</span> <span class="toc-text">2.5.2 挂载分区</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-%E5%AE%89%E8%A3%85%E5%9F%BA%E7%A1%80%E7%B3%BB%E7%BB%9F"><span class="toc-number">3.6.</span> <span class="toc-text">2.6 安装基础系统</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7-%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6"><span class="toc-number">3.7.</span> <span class="toc-text">2.7 安装系统常用软件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-8-%E7%94%9F%E6%88%90%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E8%A1%A8"><span class="toc-number">3.8.</span> <span class="toc-text">2.8 生成文件系统表</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89-%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F"><span class="toc-number">4.</span> <span class="toc-text">三.配置系统</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E6%9C%8D%E5%8A%A1"><span class="toc-number">4.1.</span> <span class="toc-text">3.1 开机自启服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E8%AE%BE%E7%BD%AE%E6%97%B6%E5%8C%BA"><span class="toc-number">4.2.</span> <span class="toc-text">3.2 设置时区</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E6%9C%AC%E5%9C%B0%E5%8C%96"><span class="toc-number">4.3.</span> <span class="toc-text">3.3 本地化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E9%85%8D%E7%BD%AE-hostname-%E5%92%8C-hosts-%E6%96%87%E4%BB%B6"><span class="toc-number">4.4.</span> <span class="toc-text">3.4 配置 hostname 和 hosts 文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-%E6%96%B0%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="toc-number">4.5.</span> <span class="toc-text">3.5 新建用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-%E5%AE%89%E8%A3%85%E5%BC%95%E5%AF%BC"><span class="toc-number">4.6.</span> <span class="toc-text">3.6 安装引导</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-1-%E5%B9%B3%E5%8F%B0%E9%A9%B1%E5%8A%A8%E5%AE%89%E8%A3%85"><span class="toc-number">4.6.1.</span> <span class="toc-text">3.6.1 平台驱动安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-2-Grub-%E9%85%8D%E7%BD%AE"><span class="toc-number">4.6.2.</span> <span class="toc-text">3.6.2 Grub 配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-7-%E9%87%8D%E5%90%AF%E7%B3%BB%E7%BB%9F"><span class="toc-number">4.7.</span> <span class="toc-text">3.7 重启系统</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B-GNOME-%E6%A1%8C%E9%9D%A2%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85"><span class="toc-number">5.</span> <span class="toc-text">四.GNOME 桌面环境安装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-Xorg-%E6%9C%8D%E5%8A%A1%E5%AE%89%E8%A3%85"><span class="toc-number">5.1.</span> <span class="toc-text">4.1 Xorg 服务安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-gnome-%E5%8C%85%E5%AE%89%E8%A3%85"><span class="toc-number">5.2.</span> <span class="toc-text">4.2 gnome 包安装</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/11/06/Obsidian%20UML%20%E5%9B%BE%E6%8F%92%E4%BB%B6/" title="Obsidian UML 图插件"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E5%A3%81%E7%BA%B8/52121.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Obsidian UML 图插件"/></a><div class="content"><a class="title" href="/2025/11/06/Obsidian%20UML%20%E5%9B%BE%E6%8F%92%E4%BB%B6/" title="Obsidian UML 图插件">Obsidian UML 图插件</a><time datetime="2025-11-06T12:16:10.000Z" title="发表于 2025-11-06 20:16:10">2025-11-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/06/Java%20%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" title="Java 环境配置"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E5%A3%81%E7%BA%B8/22.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java 环境配置"/></a><div class="content"><a class="title" href="/2025/11/06/Java%20%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" title="Java 环境配置">Java 环境配置</a><time datetime="2025-11-06T11:16:10.000Z" title="发表于 2025-11-06 19:16:10">2025-11-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/27/%E9%85%8D%E7%BD%AE%20VS2022%20%E4%BB%A5%E5%8F%8A%20Qt%20%E7%8E%AF%E5%A2%83/" title="配置 VS2022 以及 Qt 环境"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E5%A3%81%E7%BA%B8/15.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="配置 VS2022 以及 Qt 环境"/></a><div class="content"><a class="title" href="/2025/10/27/%E9%85%8D%E7%BD%AE%20VS2022%20%E4%BB%A5%E5%8F%8A%20Qt%20%E7%8E%AF%E5%A2%83/" title="配置 VS2022 以及 Qt 环境">配置 VS2022 以及 Qt 环境</a><time datetime="2025-10-26T16:16:10.000Z" title="发表于 2025-10-27 00:16:10">2025-10-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/20/Docker%20%E9%85%8D%E7%BD%AE%20Redis%20%E5%92%8C%20MySQL/" title="Docker 配置 Redis 和 MySQL"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E5%A3%81%E7%BA%B8/20.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker 配置 Redis 和 MySQL"/></a><div class="content"><a class="title" href="/2025/10/20/Docker%20%E9%85%8D%E7%BD%AE%20Redis%20%E5%92%8C%20MySQL/" title="Docker 配置 Redis 和 MySQL">Docker 配置 Redis 和 MySQL</a><time datetime="2025-10-20T14:01:10.000Z" title="发表于 2025-10-20 22:01:10">2025-10-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/20/%E9%85%8D%E7%BD%AE%20MySQL/" title="配置 MySQL"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://dustwind-picture-upload.oss-cn-chengdu.aliyuncs.com/%E5%A3%81%E7%BA%B8/13399.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="配置 MySQL"/></a><div class="content"><a class="title" href="/2025/10/20/%E9%85%8D%E7%BD%AE%20MySQL/" title="配置 MySQL">配置 MySQL</a><time datetime="2025-10-20T14:01:10.000Z" title="发表于 2025-10-20 22:01:10">2025-10-20</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/about" title="DustWind" target="_blank">DustWind</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="安知鱼主题">安知鱼主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">29</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">31</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">10</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">C++在线帮助文档</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://cppreference.cn/w/" title="中文版"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icon_cpp_reference_CN.png" alt="中文版"/><span class="back-menu-item-text">中文版</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://cplusplus.com/reference/" title="英文版"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icon_cpp_reference_EN.png" alt="英文版"/><span class="back-menu-item-text">英文版</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">主页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/DustWind97" title="GitHub"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icon_GitHub.png" alt="GitHub"/><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/dustwind97" title="Gitee"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icon_Gitee.png" alt="Gitee"/><span class="back-menu-item-text">Gitee</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://space.bilibili.com/11246855?spm_id_from=333.1365.0.0" title="B站"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icon_Bilibili.png" alt="B站"/><span class="back-menu-item-text">B站</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">安知鱼</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://docs.anheyu.com/" title="官方文档"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="官方文档"/><span class="back-menu-item-text">官方文档</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 好友链</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=9610463782&amp;server=tencent"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 随心随谈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Arch/" style="font-size: 0.88rem;">Arch<sup>1</sup></a><a href="/tags/C-CPP/" style="font-size: 0.88rem;">C/CPP<sup>1</sup></a><a href="/tags/CMake/" style="font-size: 0.88rem;">CMake<sup>1</sup></a><a href="/tags/CPP/" style="font-size: 0.88rem;">CPP<sup>2</sup></a><a href="/tags/Desktop-Entry/" style="font-size: 0.88rem;">Desktop Entry<sup>1</sup></a><a href="/tags/Docker/" style="font-size: 0.88rem;">Docker<sup>2</sup></a><a href="/tags/GNOME/" style="font-size: 0.88rem;">GNOME<sup>1</sup></a><a href="/tags/Git/" style="font-size: 0.88rem;">Git<sup>1</sup></a><a href="/tags/Hello-World/" style="font-size: 0.88rem;">Hello World<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 0.88rem;">Hexo<sup>1</sup></a><a href="/tags/JDK/" style="font-size: 0.88rem;">JDK<sup>1</sup></a><a href="/tags/Java/" style="font-size: 0.88rem;">Java<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>8</sup></a><a href="/tags/Manjaro/" style="font-size: 0.88rem;">Manjaro<sup>4</sup></a><a href="/tags/Markdown/" style="font-size: 0.88rem;">Markdown<sup>1</sup></a><a href="/tags/MySQL/" style="font-size: 0.88rem;">MySQL<sup>4</sup></a><a href="/tags/Obsidian/" style="font-size: 0.88rem;">Obsidian<sup>2</sup></a><a href="/tags/ProtoBuf/" style="font-size: 0.88rem;">ProtoBuf<sup>1</sup></a><a href="/tags/Qt/" style="font-size: 0.88rem;">Qt<sup>3</sup></a><a href="/tags/Redis/" style="font-size: 0.88rem;">Redis<sup>3</sup></a><a href="/tags/SSH/" style="font-size: 0.88rem;">SSH<sup>1</sup></a><a href="/tags/STL/" style="font-size: 0.88rem;">STL<sup>1</sup></a><a href="/tags/UML/" style="font-size: 0.88rem;">UML<sup>1</sup></a><a href="/tags/VS/" style="font-size: 0.88rem;">VS<sup>1</sup></a><a href="/tags/WSL/" style="font-size: 0.88rem;">WSL<sup>1</sup></a><a href="/tags/Windows/" style="font-size: 0.88rem;">Windows<sup>1</sup></a><a href="/tags/classDiagram/" style="font-size: 0.88rem;">classDiagram<sup>1</sup></a><a href="/tags/gRPC/" style="font-size: 0.88rem;">gRPC<sup>1</sup></a><a href="/tags/%E7%BC%96%E8%AF%91/" style="font-size: 0.88rem;">编译<sup>1</sup></a><a href="/tags/%E8%AF%97%E8%AF%8D/" style="font-size: 0.88rem;">诗词<sup>3</sup></a><a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 0.88rem;">项目<sup>2</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="17420677060" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://music.163.com/#/playlist?id=17420677060&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js').then(runMermaid)
  }

  anzhiyu.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: '',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: '',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: '',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>